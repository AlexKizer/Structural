function live(a){var b=function(a,c){return c?void b.set(a,c):b.get(a)},c=[],d=!0,e=0,f={};$.extend(b,S.ee()),b.paused=!1;var g=S.simpleWrappable();return g.live.end=function(){b.fire("end",{})},g.live.set=function(a,b){f[a]=b},g.live.get=function(a){return f[a]},g.live.is=function(a,b){return f[a]===b},g.live.log=function(a){console.log(a)},b.wrap=function(a){if(console.log("item is "+a),"undefined"==typeof a.getSync||"undefined"==typeof a.getAsync)return void console.log("cannot livewrap item. no item.getSync() or item.getAsync()");for(var e in a.getSync())b[e]=function(b){var e=function(){if(d){var e=Array.prototype.slice.call(arguments),f=null;null!==a.getSync()[b]&&(f=a.live[b].apply({},e));var g;return a.getAsync().hasOwnProperty(b)&&null!==a.getSync()[b]?g=function(c){a.getSync()[b].apply(a.getSync(),e),a.getAsync()[b].apply(a.getAsync(),e.concat(c))}:null!==a.getSync()[b]?g=function(c){a.getSync()[b].apply(a.getSync(),e),c()}:a.getAsync().hasOwnProperty(b)?g=function(c){a.getAsync()[b].apply(a.getAsync(),e.concat(c))}:(console.log("method "+b.toString()+" was declared as async only (null), but no corresponding view method was found."),g=!1),g&&c.push(g),null!==f?f:void 0}};return e}(e)},b.wrap(g),Array.isArray(a)?(console.log("is array!"),a.forEach(function(a){b.wrap(a)})):b.wrap(a),b.close=function(){d=!1},b.pause=function(){b.paused=!0},b.play=function(){b.paused=!1,b.exec()},b.getIndex=function(){return e},b.__getLength=function(){return c.length},b.exec=function(){function a(){return console.log("doNext"),console.log(c[f]),f>=c.length?void b.fire("end",{}):void(b.paused||(b.fire("update",{}),e++,c[f++].call({},function(){setTimeout(a,0)})))}if(console.log("exec: fns.length "+c.length),!d){var f=e;a()}},b}window.S=function(a){var b={};b.components={},b.views={};var c=0;return b.wait=function(a,b){setTimeout(a,b)},a||console.log("jQuery is missing."),b.add=function(a,c){b.components[a]=c},b.addView=function(a,c,d){b.views[a]||(b.views[a]={}),b.views[a][c]=d},b.simpleWrappable=function(){var a={live:{},async:{}};return a.getSync=function(){return a.live},a.getAsync=function(){return a.async},a},b.nextId=function(){return"sid_"+c++},b.map=function(){var a={},b=function(b,c){if(console.log("attempting to store "+b.sid),!b.sid)throw new Error("S.map() requires sid property. Use S.nextId().");return"undefined"==typeof c?a[b.sid]:void(a[b.sid]=c)};return b.clear=function(){a={}},b.delete=function(b){if(!b.sid)throw new Error("S.map() requires sid property. Use S.nextId().");delete a[b.sid]},b.has=function(b){if(!b.sid)throw new Error("S.map() requires sid property. Use S.nextId().");return"undefined"!=typeof a[b.sid]},b.forEach=function(b,c){c||(c={});for(var d in a)b.call(c,[d,a[d]])},b},b}(jQuery),S.ee=function(){var a={};return a.registeredEvents={},a.on=function(b,c){"undefined"==typeof a.registeredEvents[b]&&(a.registeredEvents[b]=[]),a.registeredEvents[b].push(c)},a.fire=function(b,c){if("undefined"!=typeof a.registeredEvents[b])for(var d=0;d<a.registeredEvents[b].length;d++)a.registeredEvents[b][d].call(c,c)},a},S||console.log("S is not defined."),S.ee||console.log("S is not defined."),S.base=function(a){var b=S.ee();return b.live={},b.algo={},b.factory={},a&&(b.view=a,a.component=b),b.structureName="general",b.setView=function(a){b.view=a,a.setComponent(b)},b.copy=function(a){b.setState(a.getState())},b.getState=function(){console.log("getState not implemented!")},b.setState=function(){console.log("setState not implemented!")},b.getSync=function(){return b.live},b.getAsync=function(){return b.view},b},S||console.log("S is not defined."),S.ee||console.log("S is not defined."),S.view=function(){var a=S.ee(),b=0;return a.$e=$('<div class="sview"></div>'),a.speed=function(a){if(!a)return b;var c=Math.min(5,Math.max(1,a));b=c},a.focus=function(){console.log("focus?"),a.$e&&(a.$e.css("border","2px solid blue"),console.log("focused"))},a.unfocus=function(){a.$e&&a.$e.css("box-shadow","none")},a},S.live=function(a){var b=function(a,c){return c?void b.set(a,c):b.get(a)},c=[],d=!0,e=0,f={};$.extend(b,S.ee()),b.paused=!1;var g=S.simpleWrappable();return g.live.end=function(){b.fire("end",{})},g.live.set=function(a,b){f[a]=b},g.live.get=function(a){return f[a]},g.live.is=function(a,b){return f[a]===b},g.live.log=function(a){console.log(a)},b.wrap=function(a){if(console.log("item is "+a),"undefined"==typeof a.getSync||"undefined"==typeof a.getAsync)return void console.log("cannot livewrap item. no item.getSync() or item.getAsync()");for(var e in a.getSync())b[e]=function(b){var e=function(){if(d){var e=Array.prototype.slice.call(arguments),f=null;null!==a.getSync()[b]&&(f=a.live[b].apply({},e));var g;return a.getAsync().hasOwnProperty(b)&&null!==a.getSync()[b]?g=function(c){a.getSync()[b].apply(a.getSync(),e),a.getAsync()[b].apply(a.getAsync(),e.concat(c))}:null!==a.getSync()[b]?g=function(c){a.getSync()[b].apply(a.getSync(),e),c()}:a.getAsync().hasOwnProperty(b)?g=function(c){a.getAsync()[b].apply(a.getAsync(),e.concat(c))}:(console.log("method "+b.toString()+" was declared as async only (null), but no corresponding view method was found."),g=!1),g&&c.push(g),null!==f?f:void 0}};return e}(e)},b.wrap(g),Array.isArray(a)?(console.log("is array!"),a.forEach(function(a){b.wrap(a)})):b.wrap(a),b.close=function(){d=!1},b.pause=function(){b.paused=!0},b.play=function(){b.paused=!1,b.exec()},b.getIndex=function(){return e},b.__getLength=function(){return c.length},b.exec=function(){function a(){return console.log("doNext"),console.log(c[f]),f>=c.length?void b.fire("end",{}):void(b.paused||(b.fire("update",{}),e++,c[f++].call({},function(){setTimeout(a,0)})))}if(console.log("exec: fns.length "+c.length),!d){var f=e;a()}},b},S.add("array",function(a,b){var c=S.base(b),d=[];return c.array=a,c.live.focus=null,c.live.range=null,c.live.clearfocus=null,c.live.clearrange=null,c.live.leftTo=null,c.live.getLength=function(){return c.array.length},c.live.test=function(){return 9},c.live.flag=function(a){d[a]=!0},c.live.isFlagged=function(a){return!!d[a]},c.live.setItem=function(a,b){c.array[a]=b},c.live.getItem=function(a){return c.array[a]},c.live.push=function(a){c.array.push(a)},c}),S.addView("array","simple",function(a){function b(){m=q.numElements*l+r,p.$e.css("width",m)}function c(){n.find("td").click(d),n.find("td").dblclick(e)}function d(){p.focus($(this).data("index"))}function e(){$(this).hasClass("flagged")?$(this).removeClass("flagged"):$(this).addClass("flagged")}function f(a,b){var c=$("<td>"+a+"</td>"),d=$("<th>"+b+"</th>"),e=c.add(d).css("opacity",0);return n.append(c),o.append(d),p.fire("change",{}),e}function g(a){i(a,q.pageTime,m-1)}function h(a){i(a,q.stepTime,l)}function i(a,b,c){var d="+=";a||(d="-=");var e={};e.scrollLeft=d+c,p.$e.animate(e,b)}function j(a,b,c){var d={};d.scrollLeft=a,p.$e.animate(d,b,function(){"undefined"!=typeof c&&c()})}var k,l,m,n,o,p=S.view(),q={hiddenDelimiter:",",numElements:5,elementWidth:20,pageTime:300,stepTime:50,scrollTime:500,maxScrollTime:1e3,areObjs:!1},r=0;return $.extend(q,a),array=q.array,p.array=array,p.leftBound=0,p.rightBound=q.numElements-1,p.init=function(){console.log("view.component is "),console.log(p.component),p.$e=$('<div class="array"><table><tr></tr><tr class="indices"></tr></table></div>'),n=p.$e.find("tr").first(),o=p.$e.find("tr").eq(1);for(var a=0;a<p.component.array.length;a++){var d=$("<td>"+p.component.array[a]+'<span style="font-size: 0;">'+q.hiddenDelimiter+"</span></td>").data("index",a),e=$("<th>"+a+"</th>").data("index",a);n.append(d),o.append(e)}p.$e.find("td").add("th").css("width",q.elementWidth),l=q.elementWidth+r,b(),c()},p.render=function(){return p.$e},p.scaleTo=function(a){console.log("scaling"),q.elementWidth=Math.floor(a.width/q.numElements)-r,p.init()},p.onScroll=function(a){k=a},p.focus=function(a,b){if(console.log("focusing on "+a),!(0>a||a>p.component.array.length-1)){n.find("td").removeClass("focus"),o.find("th").removeClass("focus");var c=a-Math.floor(q.numElements/2);n.find("td").eq(a).addClass("focus"),o.find("th").eq(a).addClass("focus"),p.leftTo(c,b)}},p.clearfocus=function(a){n.find("td").removeClass("focus"),o.find("th").removeClass("focus"),a()},p.flag=function(a,b){n.find("td").eq(a).addClass("flagged"),b&&b()},p.range=function(a,b,c,d){var e=n.find("td").slice(a,b+1),f="range"+c;n.find("td").slice(a,b+1).addClass(function(a){var b=e.eq(a).attr("class"),c=f+" "+b;e.eq(a).attr("class",c)}),d()},p.clearrange=function(a,b){n.find("td").removeClass("range"+a),b()},p.setItem=function(a,b,c){p.focus(a,function(){setTimeout(function(){n.find("td").eq(a).css("color");n.find("td").eq(a).addClass("array-remove"),setTimeout(function(){n.find("td").eq(a).text(b),n.find("td").eq(a).removeClass("array-remove"),c()},300)},200)})},p.push=function(a,b){var c=f(a,p.component.array.length-1);p.leftTo(p.component.array.length-1,function(){c.animate({opacity:1},200,function(){b()})})},p.leftTo=function(a,b){if(a=parseInt(a,10),!isNaN(a)){0>=a&&(a=0),a>=p.component.array.length-1&&(a=p.component.array.length-1);var c=Math.min(Math.abs(a-p.leftBound)*q.stepTime,q.maxScrollTime);0==a?(p.leftBound=0,p.rightBound=q.numElements-1):a>p.component.array.length-q.numElements?(p.leftBound=p.component.array.length-q.numElements,p.rightBound=p.component.array.length-1):(p.leftBound=a,p.rightBound=a+q.numElements-1),j(a*l,c,b)}},p.rightTo=function(a){if(a=parseInt(a,10),!isNan(a)){0>=a&&(a=0),a>=p.component.array.length-1&&(a=p.component.array.length-1);var b=Math.min(Math.abs(a-p.leftBound)*q.stepTime,q.maxScrollTime);a<=q.numElements-1?(p.leftBound=0,p.rightBound=q.numElements-1):a==p.component.array.length-1?(p.leftBound=p.component.array.length-q.numElements,p.rightBound=p.component.array.length-1):(p.leftBound=a-q.numElements+1,p.rightBound=a),j(a*l,b)}},p.pageRight=function(){p.leftBound=p.leftBound+q.numElements<=p.component.array.length-q.numElements?p.leftBound+q.numElements:p.component.array.length-q.numElements,p.rightBound=p.rightBound+q.numElements<=p.component.array.length-1?p.rightBound+q.numElements:p.component.array.length-1,g(!0)},p.pageLeft=function(){p.leftBound=p.leftBound-q.numElements>=0?p.leftBound-q.numElements:0,p.rightBound=p.rightBound-q.numElements>=q.numElements-1?p.rightBound-q.numElements:q.numElements-1,g(!1)},p.right=function(){p.leftBound=p.leftBound+1<=p.component.array.length-q.numElements?p.leftBound+1:p.component.array.length-q.numElements,p.rightBound=p.rightBound+1<=p.component.array.length-1?p.rightBound+1:p.component.array.length-1,h(!0)},p.left=function(){p.leftBound=p.leftBound-1>=0?p.leftBound-1:0,p.rightBound=p.rightBound-1>=q.numElements-1?p.rightBound-1:q.numElements-1,h(!1)},p}),S.add("tree",function(a){function b(a){this.value=a,this.left=null,this.right=null,this.sid=S.nextId()}function c(a){if(!a)return null;var d=new b(a.value);return d.left=c(a.left),d.right=c(a.right),d}var d=S.base(a),e=S.map();return d.tree=new b(0),d.init=function(a){d.tree=c(a)},d.live.add=function(a,c,d){e.has(a)&&(c?e(a).left=new b(d):e(a).right=new b(d))},d.live.root=function(){return d.tree?d.tree:void 0},d.live.traverse=null,d.live.focusNode=null,d}),S.addView("tree","simple",function(){function a(a,b,c,d){var e=j.circle(c,d,10);e.addClass("tree-node"),m(a,e)}function b(a){a&&(j.text(n(a).x+500-5,n(a).y+10+5,a.value+"").addClass("tree-node-value"),b(a.left),b(a.right))}function c(a){a.left&&(j.line(n(a).x+500,n(a).y+10,n(a.left).x+500,n(a.left).y+10).attr("stroke","black"),c(a.left)),a.right&&(j.line(n(a).x+500,n(a).y+10,n(a.right).x+500,n(a.right).y+10).attr("stroke","black"),c(a.right))}function d(b){b&&(a(b,b.value,n(b).x+500,n(b).y+10),d(b.left),d(b.right))}function e(a,b){console.log("treeview.focus"),a.addClass("focus"),S.wait(function(){a.removeClass("focus"),console.log("calling fn!"),b()},500)}function f(a,b,c,d){a.animate({left:b,top:c},250,function(){d()})}function g(a){return $('<span class="node">'+a+"</span>")}function h(a,b,c){function d(a){console.log("R "+a.value),this.value=a.value,this.left=null,this.right=null,this.x=0,this.y=0,this.thread=!1,this.offset=0,this.sid=a.sid}function e(a){this.node=a,this.offset=0,this.level=0}function f(a){var b;return a?(b=new d(a),b.left=f(a.left),b.right=f(a.right)):b=null,b}function g(a){a&&(console.log(a.value),g(a.left),g(a.right))}function h(a,b,c,d){var f,g,i,j,l,m,n=new e(null),o=new e(null),p=new e(null),q=new e(null);if(!a)return d.level=-1,void(c.level=-1);if(a.y=b*k.mv,f=a.left,console.log("left is "+f),g=a.right,h(f,b+1,n,o),h(g,b+1,p,q),null===f&&null===g)c.node=a,d.node=a,c.level=b,d.level=b,c.offset=0,d.offset=0,a.offset=0;else{for(i=k.mh,j=k.mh,l=0,m=0;null!==f&&null!==g;)i<k.mh&&(j+=k.mh-i,i=k.mh),null!==f.right?(l+=f.offset,i-=f.offset,f=f.right):(l-=f.offset,i+=f.offset,f=f.left),null!==g.left?(m-=g.offset,i-=g.offset,g=g.left):(m+=g.offset,i+=g.offset,g=g.right);a.offset=(j+1)/2,l-=a.offset,m+=a.offset,q.level>o.level||null==a.left?(d=q,d.offset+=a.offset):(d=o,d.offset-=a.offset),null!=f&&f!=a.left?(p.node.thread=!0,p.node.offset=Math.abs(p.offset+a.offset-l),l-a.offset<=p.offset?p.node.left=f:p.node.right=f):null!=g&&g!=a.right&&(o.node.thread=!0,o.node.offset=Math.abs(o.offset-a.offset-m),m+a.offset>=o.offset?o.node.right=g:o.node.left=g)}}function i(a,b,c){null!=a&&(a.x=b,a.thread&&(a.thread=!1,a.right=null,a.left=null),i(a.left,b-a.offset,c),i(a.right,b+a.offset,c))}function j(a,b){a&&(console.log("STORING "+a.sid),b(a,{x:a.x,y:a.y}),j(a.left,b),j(a.right,b))}var k={mh:10,mv:10};$.extend(k,c);var l=f(a);console.log("printing _root"),g(l),h(l,0,null,null),i(l,0,!1),j(l,b)}{var i,j,k,l=S.view(),m=S.map(),n=S.map(),o={mh:30,mv:50};S.map()}return l.init=function(){i=$('<div class="tree"></div>');var a=document.createElementNS("http://www.w3.org/2000/svg","svg");i.append($(a)),k=i.find("svg").first(),k.width(1e3),k.height(300),k.addClass("tree-svg"),j=Snap(a),console.log("typeof elem "+typeof i.find("svg").first().get()),h(l.component.tree,n,o),c(l.component.tree),d(l.component.tree),b(l.component.tree)},l.scaleTo=function(a){i.width(a.width),i.height(a.height)},l.render=function(){return i},l.focusNode=function(a,b){console.log("treeview.focus"),e(m(a),b)},l.add=function(a,b,c){m(a,g(c)),h(l.component.tree,n,o),m.forEach(function(b){f(m(b[0]),b[1].x,b[1].y,function(){i.append(m(a))})})},l});