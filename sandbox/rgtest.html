<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="js/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="js/lib/snap.svg-min.js" type="text/javascript"></script>
    <script src="structural.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="test.css"/>
    <style>
        .tree-svg {
            width: 100%;
            height: 100%;
        }
        
        .tree-node {
            fill: #0033cc;
            cursor: pointer;
        }
        .tree-node:hover {
            fill: #0099cc;
        }
        .tree-node-value {
            font-family: arial;
            fill: white;
            cursor: pointer;
        }
        .focus {
            stroke-width: 2px;
            stroke: orange;
        }
        .array {
            z-index: 999;
            position: fixed; 
            top: 300px;
            right: 50px;
        }
    </style>
    <script type="text/javascript">
        $(document).ready(function(){

            function Node(value) {
                this.value = value;
                this.left = null;
                this.right = null;
                this.sid = S.nextId()
            }
            function genTree(root, h, maxh) {
                if(h > maxh)
                    return;
                root.left = new Node(Math.floor(Math.random() * 10));
                root.right = new Node(Math.floor(Math.random() * 10));
                genTree(root.left, h + 1, maxh);
                genTree(root.right, h + 1, maxh);
            }

            var root = new Node(1);
            genTree(root, 0, 3);

            var myTreeView = S.views.tree.simple();
            var myTree = S.components.tree(myTreeView);
            var myArrayView = S.views.array.simple({
                numElements: 16
            });
            var myArray = S.components.array([], myArrayView);
            myArrayView.scaleTo({
                width: 600,
                height: 300
            });
            myArrayView.init();
            myTree.init(root);
            myTreeView.init();
            $('body').append(myTreeView.render());
            $('body').append(myArrayView.render());
            
            myArray.live.push(1);
            
            
            var livewrap = S.live([myTree, myArray]);
            
            function traversal(c) {
                c.log('c.root is ' + c.root());
                //c.focus(c.root());
                //preorder(c.root());
                inorder(c.root());
                
                function preorder(node) {
                    if(node) {
                        c.focusNode(node);
                        preorder(node.left);
                        preorder(node.right);
                    }
                }
                
                function inorder(node) {
                    if(node) {
                        inorder(node.left);
                        c.focusNode(node);
                        c.push(node.value);//array
                        inorder(node.right);
                    }
                }
            }
            
            function buildArray(c) {
                for(var i = 0; i < 5; i++) {
                    c.push(i);
                }
            }
            
            traversal(livewrap);
            //buildArray(livewrap);
            
            livewrap.on('end', function(){
                console.log('end');
            });
            
            livewrap.close();
            livewrap.exec();



            /*function printTree(root) {
                if(!root)
                    return;
                console.log(root.value)
                printTree(root.left);
                printTree(root.right);
            }
            printTree(root);

            function getStore() {
                var _store = {};
                var store = function(key, value) {
                    if(typeof value === 'undefined')
                        return _store[key];
                    console.log('storing');
                    _store[key] = value;
                }
                store.getStore = function(){
                    return _store;
                }
                store.getLength = function() {
                    return Object.keys(_store).length;
                }
                return store;
            }

            var store = getStore();

            rg(root, store, {
                mh: 15,
                mv: 20
            });


            function drawNode(node, x, y) {
                var $node = $('<span>' + node.value + '</span>').css({
                    display: 'block',
                    position: 'absolute',
                    left: x,
                    top: y,
                    width: 10,
                    height: 10,
                    borderRadius: '50%',
                    border: '1px solid black',
                    overflow: 'hidden'
                });
                $('body').append($node);
            }

            function drawTree(root) {
                if(!root)
                    return;
                drawNode(root, store(root.sid).x + 500, store(root.sid).y + 10);
                drawTree(root.left);
                drawTree(root.right);
            }

            drawTree(root);  */





        });



    </script>
</head>
<body>

</body>
</html>