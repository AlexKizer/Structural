<html>
<head>
    <title>structural-core 1</title>
    <script type="text/javascript" src="../lib/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../lib/snap.svg-min.js"></script>
    <script type="text/javascript" src="../build/structural.js"></script>
    <link rel="stylesheet" type="text/css" href="../build/structural.css"></link>
    <script type="text/javascript">
        $(document).ready(function() {
            var arrayOne = S.components.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]),
                arrayView = S.views.array.simple({
                    numElements: 7
                });
            arrayOne.initDeferred();
            arrayOne.setView(arrayView);
            arrayView.scaleTo({
                width: 650,
                height: 50
            });
            $('.wrap').append(arrayView.render());
            // define a new method:
            arrayOne.def.add('swap', swap); // TODO, should define on array class, not instance
            // test it
            testAdded.call(arrayOne.deferredContext, 'hello, world', 2, 5);
        });
        
        function flagIndex(index) {
            this.flog('flagging ' + index);
            this.flag(index);
        }
        
        function setAllTo(what) {
            for(var i = 0; i < this.getLength(); i++) {
                this.setItem(i, what);
            }
        }
        
        function swap(a, b) {
            this('a', this.getItem(a));
            this.setItem(a, this.getItem(b));
            this.setItem(b, this('a'));
        }
        
        function testAdded(msg, i0, i1) {
            this.flog('testing an added method');
            this.flog(msg);
            this.flag(i0);
            this.flag(i1);
            this.swap(i0, i1);
            this.clearfocus();
        }
    </script>
</head>
<body>
    <div class="wrap" style="text-align: center;">
        
    </div>
</body>
</html>