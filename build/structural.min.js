window.S=function(){"use strict";function a(){}var b={};console.info("Initializing structural-core"),b.VIEW_CLASS="structural_view",b.components={},b.views={};var c={},d={},e={},f={};b.defineComponent=function(d,e,f){c[d]=e,b.components[d]=function(){var e=c[d].apply(this,arguments);return b.config.provideDefaultDeferredContext&&!f&&a(e),b.views[d]&&(console.log("setting view "+d),e.view=b.views[d]()),e.init&&e.init(),e}},b.defineComponent2=function(d,e,f){c[d]=e,b.components[d]=function(e,g){var h=new c[d](e,g);return b.config.provideDefaultDeferredContext&&!f&&a(h),b.views[d]&&(h.view=b.views[d]()),h}},b.defineMethodOn=function(a,b,c){d[a]||(d[a]={}),d[a][b]=c},b.defineStandaloneMethod=function(a,b,c){e[name]||(e[name]={}),e[name].requirements=a,e[name].optionalRequirements=b,e[name][methodName]=c},b.setMetaData=function(a,b){f[a]=b},b.setDefaultView=function(a,c){b.views[a]=c},b.addMethod=function(a,b,c){d[a]||(d[a]={}),d[a][b]=c},b.getComponentMethods=function(a){return d[a]},b.config={provideDefaultDeferredContext:!0,viewClass:"structural_view"};var g=0;return b.nextId=function(){return"sid_"+g++},b.map=function(){var a={},b={},c=function(c,d){if(!c.sid)throw new Error("S.map() requires sid property. Use S.nextId().");return"undefined"==typeof d?(a[c.sid]||(a[c.sid]={}),a[c.sid]):(a[c.sid]=d,void(b[c.sid]=c))};return c.clear=function(){a={},b={}},c.delete=function(b){if(!b.sid)throw new Error("S.map() requires sid property. Use S.nextId().");delete a[b.sid]},c.has=function(b){if(!b.sid)throw new Error("S.map() requires sid property. Use S.nextId().");return"undefined"!=typeof a[b.sid]},c.forEach=function(c,d){d||(d={});for(var e in a)c.call(d,[b[e],a[e]])},c},b.wait=function(a,b){setTimeout(a,b)},b.EventEmitter=function(){this.registeredEvents={}},b.EventEmitter.prototype.on=function(a,b){this.registeredEvents[a]||(this.registeredEvents[a]=[]),this.registeredEvents[a].push(b)},b.EventEmitter.prototype.fire=function(a,b){if(this.registeredEvents[a])for(var c=0;c<this.registeredEvents[a].length;c++)this.registeredEvents[a][c].call(b,b)},b.ee=function(){var a={};return a.registeredEvents={},a.on=function(b,c){"undefined"==typeof a.registeredEvents[b]&&(a.registeredEvents[b]=[]),a.registeredEvents[b].push(c)},a.fire=function(b,c){if("undefined"!=typeof a.registeredEvents[b])for(var d=0;d<a.registeredEvents[b].length;d++)a.registeredEvents[b][d].call(c,c)},a},b.Component=function(){function a(a,b){a&&(this.state=a),b&&(this.view=b)}return a.prototype=Object.create(b.EventEmitter.prototype),Object.defineProperty(a.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a}}),Object.defineProperty(a.prototype,"view",{get:function(){return this._view},set:function(a){this._view=a,a.component=this,a.live.component=this,a.init()}}),a.prototype.getSync=function(){return this.live},a.prototype.getAsync=function(){return this.view.live},a.prototype.getMethods=function(){return b.getComponentMethods(this.alias)},a}(),b.View=function(a){function c(){this._config={},this.$element=a("<div>").addClass(b.VIEW_CLASS)}return c.prototype=Object.create(b.EventEmitter.prototype),c.prototype.init=function(){},c.prototype.render=function(){},c.prototype.scaleTo=function(a){this.$element.width(a.width),this.$element.height(a.height)},c.prototype.scale=function(a){this.$element.width(a.width),this.$element.height(a.height)},c.prototype.clear=function(){this.$element.empty()},Object.defineProperty(c.prototype,"config",{get:function(){return this._config},set:function(b){a.extend(this._config,b)}}),c}(jQuery),b.AsyncFunctionQueue=function(){function a(){this.functionList=[],this.position=0,this.sleep=100,this.states=[],this._open=!1,this.clearOnFinish=!0,this.executing=!1}return a.prototype.push=function(a){this.functionList.push(a),this._open&&!this.executing&&this.exec()},a.prototype.clear=function(){this.executing=!1,this.functionList=[],this.position=0},a.prototype.next=function(a){var b=this;this.functionList[this.position].call(b,function(){b.position++,a()})},a.prototype.exec=function(){function a(){return b.position>=b.functionList.length&&b.clearOnFinish&&b.clear(),b.position>=b.functionList.length||!b.executing||!b.functionList[b.position]?(b.executing=!1,void console.groupEnd()):void b.next(function(){setTimeout(a,b.sleep)})}console.groupCollapsed("AsyncFunctionQueue executing"),this.executing=!0;var b=this;a()},a.prototype.pause=function(){this.executing=!1},a.prototype.open=function(){this._open=!0,this.exec()},a.prototype.close=function(){this._open=!1,this.executing=!1},Object.defineProperty(a.prototype,"length",{get:function(){return this.functionList.length}}),Object.defineProperty(a.prototype,"completion",{get:function(){return this.position/this.functionList.length}}),a}(),b.DeferredInterface=function(){function a(a){b.EventEmitter.call(this),this.queue=a,this.clones={};var d=this;this.interface=function(a,b){return"undefined"==typeof b?d.interface._get(a):void d.interface._set(a,b)},this.include(c())}function c(){var a={getAsync:function(){return this.async},getSync:function(){return this.live},live:{},async:{},noCopy:!0},b={};return a.live.log=function(a){console.log(a)},a.live.warn=function(a){console.warn(a)},a.live._set=function(a,c){b[a]=c},a.live._get=function(a){return b[a]},a.live.is=function(a,c){return b[a]===c},a.live.flog=null,a.async.flog=function(a,b){console.log(a),b()},a.live.fwarn=null,a.async.fwarn=function(a,b){console.warn(a),b()},a}return a.prototype=Object.create(b.EventEmitter.prototype),a.prototype.handle=function(){return this.interface},a.prototype.add=function(a,b){b.bind(this.interface),this.interface[a]=b},a.prototype.include=function(a){var b,c=this;console.assert(a.getSync&&a.getAsync,"`wrappable` satisfies interface."),a.noCopy||(b=new a.constructor(a.state)),console.groupCollapsed("Wrapping methods of '%s'",a.alias||a),console.dir(a);for(var d in a.getSync()){console.log("Wrapping '%s'",d);var e=function(b,d){var e=function(){var e,f,g=Array.prototype.slice.call(arguments);null!==a.getSync()[b]&&a.noCopy?e=a.getSync()[b].apply(a,g):null!==a.getSync()[b]&&(e=d.getSync()[b].apply(d,g.concat(c.interface)));var f=function(d){d.deferredInterface=c,d.speed=1,a.getSync()[b]&&a.getSync()[b].apply(a,g.concat(c.interface)),a.getAsync()[b]?a.getAsync()[b].apply(a.getAsync(),g.concat(d)):d()};return f.toString=function(){return b},c.queue.push.call(c.queue,f),e};return e}(d,b);!function(b){a.getSync()[d]&&a.getSync()[d].getter?Object.defineProperty(c.interface,d,{get:function(){return b()}}):c.interface[d]=b}(e)}if(console.groupEnd(),a.getMethods){var f=a.getMethods();console.groupCollapsed("Adding defined methods of '%s'",a.alias||a);for(var g in f)console.log("Adding "+g),this.add(g,f[g])}console.groupEnd()},a}(),b.Scope=function(){function a(a){this.queue=new b.AsyncFunctionQueue,this.interface=new b.DeferredInterface(this.queue),this.include(a)}return a.prototype.include=function(a){Array.isArray(a)?a.forEach(this.interface.include):this.interface.include(a)},a}(),b.component=function(a,c,d){b.defineComponent(a,c,!1),d&&b.setMetaData(a,d)},b.method=function(a,c,d){b.defineMethodOn(a,c,d)},b.view=function(a,c){b.setDefaultView(a,c)},b}(jQuery),function(){function a(a,b){this.alias="array",S.Component.call(this,[].concat(a),b),this.state.flags=[]}a.prototype=Object.create(S.Component.prototype),a.prototype.constructor=a,a.prototype.live={},a.prototype.live.getLength=function(){return this.state.length},a.prototype.live.flag=function(a){this.state.flags[a]=!0},a.prototype.live.flagged=function(a){return this.state.flags[a]},a.prototype.live.setItem=function(a,b){this.state[a]=b},a.prototype.live.getItem=function(a){return this.state[a]},a.prototype.live.push=function(a){this.state.push(a)},a.prototype.live.focus=null,a.prototype.live.range=null,a.prototype.live.range=null,a.prototype.live.clearfocus=null,a.prototype.live.clearrange=null,a.prototype.live.leftTo=null,S.defineComponent2("array2",a)}(),S.view("array2",function(a){function b(a){a.click(c),a.dblclick(d)}function c(){r.live.focus($(this).data("index"))}function d(){$(this).hasClass("flagged")?$(this).removeClass("flagged"):$(this).addClass("flagged")}function e(a,c){var d=$("<td>"+a+"</td>"),e=$("<th>"+c+"</th>"),f=d.add(e).css({opacity:0,width:p});return d.addClass("array-cell"),e.addClass("array-index"),f.data("index",c),l.append(d),m.append(e),s=s.add(d),t=t.add(e),b(d,e),f}function f(a){h(a,r.config.pageTime,o-1)}function g(a){h(a,r.config.stepTime,n)}function h(a,b,c){var d="+=";a||(d="-=");var e={};e.scrollLeft=d+c,j.animate(e,b)}function i(a,b,c){j.animate({scrollLeft:a},b,function(){"undefined"!=typeof c&&c()})}var j,k,l,m,n,o,p,q,r=new S.View,s=$(),t=$(),u=0;return r.init=function(){r.config={hiddenDelimiter:",",numElements:5,pageTime:300,stepTime:50,scrollTime:500,maxScrollTime:1e3},r.config=a,r.leftBound=0,r.rightBound=r.config.numElements-1},r.config=function(a){$.extend(r.config,a),r.leftBound=0,r.rightBound=r.config.numElements-1},r.render=function(){j&&j.remove(),s=$(),t=$(),j=$('<div class="array"></div>'),k=$("<table></table>"),l=$("<tr></tr>").addClass("array-top"),m=$("<tr></tr>").addClass("array-bottom"),j.append(k),k.append(l).append(m),k.css({height:q}),l.css({fontSize:Math.round(.25*k.height())});for(var a=0;a<r.component.state.length;a++){var c=$("<td>"+r.component.state[a]+'<span style="font-size: 0;">'+r.config.hiddenDelimiter+"</span></td>"),d=$("<th>"+a+"</th>");c.data("index",a),d.data("index",a),c.width(p),d.width(p),c.addClass("array-cell"),d.addClass("array-index"),l.append(c),m.append(d),s=s.add(c),t=t.add(d)}return n=p+u,o=r.config.numElements*n+u,j.css("width",o),b(s),r.$element.append(j),r.$element},r.scaleTo=function(a){o=a.width,q=a.height,r.$element.css("width",a.width),r.$element.css("height",a.height),p=Math.floor(o/r.config.numElements)-u,r.render()},r.live.focus=function(a,b){if(!(0>a||a>r.component.state.length-1)){s.removeClass("focus"),t.removeClass("focus"),s.eq(a).addClass("focus"),t.eq(a).addClass("focus");var c=a-Math.floor(r.config.numElements/2);r.live.leftTo(c,b)}},r.live.clearfocus=function(a){s.removeClass("focus"),t.removeClass("focus"),a()},r.live.flag=function(a,b){s.eq(a).addClass("flagged"),b&&b()},r.live.range=function(a,b,c,d){var e=s.slice(a,b+1),f="range"+c;e.addClass(function(a){var b=e.eq(a).attr("class"),c=f+" "+b;e.eq(a).attr("class",c)}),d()},r.live.clearrange=function(a,b){s.removeClass("range"+a),b()},r.live.setItem=function(a,b,c){r.live.focus(a,function(){S.wait(function(){s.eq(a).addClass("array-remove"),S.wait(function(){s.eq(a).text(b),s.eq(a).removeClass("array-remove"),c()},300)},200)})},r.live.push=function(a,b){var c=e(a,r.component.state.length-1);r.live.leftTo(r.component.state.length-1,function(){c.animate({opacity:1},200,function(){b()})})},r.live.leftTo=function(a,b){if(a=parseInt(a,10),!isNaN(a)){0>=a&&(a=0),a>=r.component.state.length-1&&(a=r.component.state.length-1);var c=Math.min(Math.abs(a-r.leftBound)*r.config.stepTime,r.config.maxScrollTime);0==a?(r.leftBound=0,r.rightBound=r.config.numElements-1):a>r.component.state.length-r.config.numElements?(r.leftBound=r.component.state.length-r.config.numElements,r.rightBound=r.component.state.length-1):(r.leftBound=a,r.rightBound=a+r.config.numElements-1),i(a*n,c,b)}},r.live.rightTo=function(a){if(a=parseInt(a,10),!isNan(a)){0>=a&&(a=0),a>=r.component.state.length-1&&(a=r.component.state.length-1);var b=Math.min(Math.abs(a-r.leftBound)*r.config.stepTime,r.config.maxScrollTime);a<=r.config.numElements-1?(r.leftBound=0,r.rightBound=r.config.numElements-1):a==r.component.state.length-1?(r.leftBound=r.component.state.length-r.config.numElements,r.rightBound=r.component.state.length-1):(r.leftBound=a-r.config.numElements+1,r.rightBound=a),i(a*n,b)}},r.pageRight=function(){r.leftBound=r.leftBound+r.config.numElements<=r.component.state.length-r.config.numElements?r.leftBound+r.config.numElements:r.component.state.length-r.config.numElements,r.rightBound=r.rightBound+r.config.numElements<=r.component.state.length-1?r.rightBound+r.config.numElements:r.component.state.length-1,f(!0)},r.pageLeft=function(){r.leftBound=r.leftBound-r.config.numElements>=0?r.leftBound-r.config.numElements:0,r.rightBound=r.rightBound-r.config.numElements>=r.config.numElements-1?r.rightBound-r.config.numElements:r.config.numElements-1,f(!1)},r.right=function(){r.leftBound=r.leftBound+1<=r.component.state.length-r.config.numElements?r.leftBound+1:r.component.state.length-r.config.numElements,r.rightBound=r.rightBound+1<=r.component.state.length-1?r.rightBound+1:r.component.state.length-1,g(!0)},r.left=function(){r.leftBound=r.leftBound-1>=0?r.leftBound-1:0,r.rightBound=r.rightBound-1>=r.config.numElements-1?r.rightBound-1:r.config.numElements-1,g(!1)},r}),function(){function a(a,b,c){this.sid=a,this._left=b,this._right=c;var d=this;Object.defineProperty(this,"left",{get:function(){return this._left},set:function(a){console.log("setting left0"),d._left?(console.log("setting left1"),d.treeInterface.set(d._left,a)):d.treeInterface.add(d,!1,a)}}),Object.defineProperty(this,"right",{get:function(){return this._right},set:function(a){d.treeInterface.set(d._right,a)}}),this.focus=function(){console.log("focusing"),d.treeInterface.focus(d)}}function b(a,b){this.alias="tree",this.nodeMap={},this.treeNodes={};var c=this._copyTree(a,null);console.log("Tree setting view"),console.dir(b),S.Component.call(this,c,b)}function c(a){return a}function d(a){return a?a.height=1+Math.max(d(a.left),d(a.right)):-1}function e(a){return{value:a,left:null,right:null}}b.prototype=Object.create(S.Component.prototype),b.prototype.constructor=b,b.prototype.live={},Object.defineProperty(b.prototype,"state",{get:function(){return this._state},set:function(a){this._state=a,this._makeTreeNodes(this._state),this.height=d(this.state)}}),b.prototype.live.root=function(){var a=arguments[arguments.length-1];if(a){console.log("returing pseudoNode");var b=this.treeNodes[this.state.sid];return this._setTreeNodesInterface(b,a),console.dir(b),b}return console.log("returning state"),this.state},b.prototype.live.root.getter=!0,b.prototype.live.height=function(){return this.height=d(this.state),this.height},b.prototype.live.height.getter=!0,b.prototype.live.add=function(a,b,f){console.log("Adding %s",f),a=this.nodeMap[a.sid];var g;return g=b?a.right=e(f):a.left=e(f),g.sid=S.nextId(),this.nodeMap[g.sid]=g,console.dir(g),console.log("parent it"),console.dir(a),this.height=d(this.state),c(g)},b.prototype.live.remove=function(a){console.info("Removing node "+a.sid),a=this.nodeMap[a.sid];this.nodeMap[a.parent.sid];a.parent&&a.parent.left==a?a.parent.left=null:a.parent&&a.parent.right==a&&(a.parent.right=null),this.height=d(this.state)},b.prototype.live.set=function(a,b){return a=this.nodeMap[a.sid],a.value=b,a},b.prototype.live.setChild=function(){},b.prototype.live.verify=function(){console.dir(this.state)},b.prototype.live.mark=null,b.prototype.live.markPath=null,b.prototype.live.clearPath=null,b.prototype.live.showHeights=null,b.prototype.live.hideHeights=null,b.prototype.live.clearLabels=null,b.prototype.live.travel=null,b.prototype.live.label=null,b.prototype.live.focus=null,b.prototype.live.unfocus=null,b.prototype.live.clearFocus=null,b.prototype.live.display=null,b.prototype.allNodes=function(a,b){a&&(b(a),this.allNodes(a.left,b),this.allNodes(a.right,b))},b.prototype._copyTree=function(a,b){if(!a)return null;var c=e(a.value);return c.sid=a.sid?a.sid:S.nextId(),c.parent=b,c.left=this._copyTree(a.left||e._left,c),c.right=this._copyTree(a.right||e._right,c),"sid_0"==c.sid&&(console.log("ROOT"),console.dir(c)),this.nodeMap[c.sid]=c,c},b.prototype._makeTreeNodes=function(b){var c=null;return b&&(c=new a(b.sid,this._makeTreeNodes(b.left),this._makeTreeNodes(b.right)),this.treeNodes[c.sid]=c),c},b.prototype._setTreeNodesInterface=function(a,b){console.log("setting interface of %s",a),a&&(a.treeInterface=b,this._setTreeNodesInterface(a.left,b),this._setTreeNodesInterface(a.right,b))},S.defineComponent2("tree",b)}(),S.TreeView=function(){function a(){S.View.call(this),this._={},this._.data=S.map(),this.options={classes:{svg:"tree-svg",node:"tree-node",value:"tree-value",height:"tree-height",label:"tree-label",line:"tree-line",hidden:"tree-hidden",nodeFocus:"tree-node--focused"},easings:{remove:mina.easeinout}},this.live.view=this}function b(a,c){var d=[];return a?(d.push(c(a).element),d.push(c(a).s_height),d.push(c(a).s_value),d.push(c(a).s_label),d.push(c(a).leftLine),d.push(c(a).rightLine),d.concat(b(a.left,c).concat(b(a.right,c)))):d}return a.prototype=Object.create(S.View.prototype),a.prototype.constructor=a,a.prototype.live={},a.prototype.init=function(){},a.prototype.scale=function(a){var b=this._,c=.05,d=.2;return b.width=a.width,b.height=a.height,b.x0=b.width/2,b.nodeRadius=c*b.height,b.y0=b.nodeRadius,b.mv=d*b.height,b.mh=b.mv+b.nodeRadius/2,this.$element.width(b.width),this.$element.height(b.height),this.render()},a.prototype.render=function(){var b=this,c=b._;return this.clear(),c._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),c.svg=Snap(c._svg),c.svg.addClass(this.options.classes.svg),this._.svg.attr({width:c.width,height:c.height}),a.rg(this.component.state,c.data,{mh:c.mh,mv:c.mv,x0:c.x0,y0:c.y0}),this._drawLines(this.component.state),this.allNodes(this.component.state,function(a){c.data(a).element=b._drawNode(a,c.data(a).x,c.data(a).y),c.data(a).s_value=b._drawValue(a.value,c.data(a).x,c.data(a).y),c.data(a).s_height=b._drawHeight(a.height,c.data(a).x,c.data(a).y)}),this.$element.append(c._svg),this.$element},a.prototype._drawLines=function(a){var b=this._;a.left&&(b.data(a).leftLine=this._drawLine(b.data(a).x,b.data(a).y,b.data(a.left).x,b.data(a.left).y),this._drawLines(a.left)),a.right&&(b.data(a).rightLine=this._drawLine(b.data(a).x,b.data(a).y,b.data(a.right).x,b.data(a.right).y),this._drawLines(a.right))},a.prototype._drawLine=function(a,b,c,d){return this._.svg.line(a,b,c,d).addClass(this.options.classes.line)},a.prototype.allNodes=function(a,b){a&&(b(a),this.allNodes(a.left,b),this.allNodes(a.right,b))},a.prototype._drawNode=function(a,b,c){return this._.svg.circle(b,c+2,this._.nodeRadius).addClass(this.options.classes.node)},a.prototype._drawValue=function(a,b,c){var d=this._;return d.svg.text(b,c+.5*d.nodeRadius+2,a+"").addClass(this.options.classes.value).attr("text-anchor","middle").attr("font-size",1.25*d.nodeRadius)},a.prototype._drawHeight=function(a,b,c){var d=this._;return d.svg.text(b-d.nodeRadius-.85*d.nodeRadius,c+d.nodeRadius/2-3,a+"").attr("font-size",d.nodeRadius).addClass(this.options.classes.height)},a.prototype._drawLabel=function(a,b){var c=this._;return c.svg.text(c.data(a).x+c.nodeRadius+5,c.data(a).y+c.nodeRadius/2-3,"/"+b).addClass(this.options.classes.label).attr("text-anchor","right").attr("font-size",c.nodeRadius)},a.prototype.live.add=function(a,b,c,d){var a=this.component.nodeMap[a.sid],e=this.view._;this.view.scaleTo({width:e.width,height:e.height}),this.view.render(),d()},a.prototype.live.set=function(a,b,c){var d=this.view._,e=d.data(a).element,f=d.data(a).s_value;S.wait(function(){e.addClass("tree-remove"),f.addClass("tree-remove"),S.wait(function(){e.removeClass("tree-remove"),f.removeClass("tree-remove").attr("text",b),c()},300)},200)},a.prototype.live.remove=function(a,c){function d(){j>=e&&(h.forEach(function(a){a&&a.remove()}),f.render(),c())}var e,f=this.view,g=f._,h=b(a,g.data),i=a.parent,j=0;i&&null==i.left&&g.data(i).leftLine?(h.push(g.data(i).leftLine),delete g.data(i).leftLine):i&&null==i.right&&g.data(i).rightLine&&(h.push(g.data(i).rightLine),delete g.data(i).rightLine),e=h.length,h.forEach(function(a){j++,a&&(a.attr("cy")?a.animate({cy:1e3},500,f.options.easings.remove,d):a.attr("y1")?a.animate({y1:1e3,y2:1e3},500,f.options.easings.remove,d):a.animate({y:1e3},500,f.options.easings.remove,d))})},a.prototype.live.focus=function(a,b){a=this.view.component.nodeMap[a.sid],a&&this.view._.data(a).element.addClass("focus"),b()},a.prototype.live.unfocus=function(a,b){a=this.view.component.nodeMap[a.sid],a&&this.view._.data(a).element.removeClass("focus"),b()},a.prototype.live.clearFocus=function(){var a=this.view,b=a._;a.allNodes(a.component.state,function(a){b.data(a).element.removeClass("focus")})},a.prototype.live.travel=function(a,b,c){var d=this.view._;if(b)if(d.data(a).rightLine){var e=d.data(a).rightLine;e.addClass("tree-line-active");var f=d.svg.circle(e.attr("x1"),e.attr("y1"),5).addClass("tree-travelorb");f.insertAfter(e),f.animate({cx:e.attr("x2"),cy:e.attr("y2")},500,null,function(){f.remove(),e.removeClass("tree-line-active"),c()})}else c();else if(d.data(a).leftLine){var g=d.data(a).leftLine;g.addClass("tree-line-active");var f=d.svg.circle(g.attr("x1"),g.attr("y1"),5).addClass("tree-travelorb");f.insertAfter(g),f.animate({cx:g.attr("x2"),cy:g.attr("y2")},500,null,function(){f.remove(),g.removeClass("tree-line-active"),c()})}else c()},a.prototype.live.label=function(a,b,c){var d=this.view._;a&&d.data(a)?(d.data(a).label=b,d.data(a).s_label=this.view._drawLabel(a,b),c()):c()},a.prototype.live.clearLabels=function(){var a=this.view,b=a._;a.allNodes(a.component.state,function(a){b.data(a).s_label.remove()})},a.prototype.live.display=function(a){console.info("display");var b=this.view,c=b._;b.allNodes(b.component.state,function(d){var e=c.data(d);a.heights&&e.s_height.removeClass(b.options.classes.hidden),a.heights===!1&&e.s_height.addClass(b.options.classes.hidden),a.labels&&e.s_label.removeClass(b.options.classes.hidden),a.labels===!1&&e.s_label.addClass(b.options.classes.hidden),a.values&&e.s_value.removeClass(b.options.classes.hidden),a.values===!1&&e.s_value.addClass(b.options.classes.hidden),a.lines&&(e.leftLine.removeClass(b.options.classes.hidden),e.rightLine.removeClass(b.options.classes.hidden)),a.lines===!1&&(e.leftLine.addClass(b.options.classes.hidden),e.rightLine.addClass(b.options.classes.hidden)),a.nodes&&e.element.removeClass(b.options.classes.hidden),a.nodes===!1&&e.element.addClass(b.options.classes.hidden)})},a.rg=function(a,b,c){function d(a){this.value=a.value,this.left=null,this.right=null,this.x=0,this.y=0,this.thread=!1,this.offset=0,this.sid=a.sid}function e(a){this.node=a,this.offset=0,this.level=0}function f(a){var b;return a?(b=new d(a),b.left=f(a.left),b.right=f(a.right)):b=null,b}function g(a,b,c,d){var f,h,i,k,l,m,n=new e(null),o=new e(null),p=new e(null),q=new e(null);if(!a)return d.level=-1,void(c.level=-1);if(a.y=b*j.mv,f=a.left,h=a.right,g(f,b+1,n,o),g(h,b+1,p,q),null===f&&null===h)d&&c&&(c.node=a,d.node=a,c.level=b,d.level=b,c.offset=0,d.offset=0),a.offset=0;else{for(i=j.mh,k=j.mh,l=0,m=0;null!==f&&null!==h;)i<j.mh&&(k+=j.mh-i,i=j.mh),null!==f.right?(l+=f.offset,i-=f.offset,f=f.right):(l-=f.offset,i+=f.offset,f=f.left),null!==h.left?(m-=h.offset,i-=h.offset,h=h.left):(m+=h.offset,i+=h.offset,h=h.right);a.offset=(k+1)/2,l-=a.offset,m+=a.offset,q.level>o.level||null==a.left?(d=q,d.offset+=a.offset):(d=o,d.offset-=a.offset),null!=f&&f!=a.left&&p.node?(p.node.thread=!0,p.node.offset=Math.abs(p.offset+a.offset-l),l-a.offset<=p.offset?p.node.left=f:p.node.right=f):null!=h&&h!=a.right&&o.node&&(o.node.thread=!0,o.node.offset=Math.abs(o.offset-a.offset-m),m+a.offset>=o.offset?o.node.right=h:o.node.left=h)}}function h(a,b,c){null!=a&&(a.x=b,a.thread&&(a.thread=!1,a.right=null,a.left=null),h(a.left,b-a.offset,c),h(a.right,b+a.offset,c))}function i(a,b){a&&(b(a)[j.xProperty]=a.x+j.x0||0,b(a)[j.yProperty]=a.y+j.y0||0,i(a.left,b),i(a.right,b))}var j={mh:10,mv:10,xProperty:"x",yProperty:"y"};$.extend(j,c);var k=f(a);g(k,0,null,null),h(k,0,!1),i(k,b)},a}(),S.method("array","finish",function(){this.clearfocus(),this.leftTo(0)}),S.method("array","swap",function(a,b){this.log("swapping"),this("temp",this.getItem(a)),this.setItem(a,this.getItem(b)),this.setItem(b,this("temp"))}),S.method("array","isSorted",function(){for(var a=1;a<this.getLength();a++)if(this.getItem(a)<this.getItem(a-1))return!1;return!0}),S.method("array","searchLinear",function(a){for(var b=0;b<this.getLength();b++)if(this.focus(b),this.getItem(b)==a)return void this.flag(b);this.finish()}),S.method("array","searchBinary",function(a){function b(c,d){if(c>d)return this.clearrange(1),void this.finish();this.clearrange(1),this.range(c,d,1);var e=Math.floor((c+d)/2);if(this.focus(e),a<this.getItem(e))b.call(this,c,e-1);else{if(!(a>this.getItem(e)))return this.focus(e),void this.flag(e);b.call(this,e+1,d)}}this.isSorted()||this.warn("Array is not sorted. Binary search will not behave correctly."),b.call(this,0,this.getLength())}),S.method("array","insertionSort",function(){for(var a=0;a<this.getLength();a++){for(this("j",a);this("j")>0&&this.getItem(this("j")-1)>this.getItem(this("j"));)this.swap(this("j"),this("j")-1),this("swapped",!0),this("j",this("j")-1);this.range(0,a,1)}this.clearrange(1),this.finish()}),S.method("array","bubbleSort",function(){for(this("swap",!0);this.is("swap",!0);){this("swap",!1);for(var a=0;a<this.getLength()-1;a++)this.focus(a),this.getItem(a)>this.getItem(a+1)&&(this.range(a,a+1,2),this.swap(a,a+1),this("swap",!0),this.clearrange(2))}this.finish()}),S.method("array","quickSort",function(){}),S.method("tree","finish",function(){this.clearFocus()}),S.method("tree","buildBST",function(){this.clear(),this.setNode(this.root(),12),this("left",this.add(this.root(),!1,6)),this("right",this.add(this.root(),!0,13)),this.add(this("left"),!1,4),this.add(this("right"),!0,14)}),S.method("tree","isBST",function(){}),S.method("tree","traversal",function(a){function b(a){a&&(e.call(this,a),this.travel(a,!1),b.call(this,a.left),this.travel(a,!0),b.call(this,a.right))}function c(a){a&&(this.travel(a,!1),c.call(this,a.left),e.call(this,a),this.travel(a,!0),c.call(this,a.right))}function d(a){a&&(this.travel(a,!1),d.call(this,a.left),this.travel(a,!0),d.call(this,a.right),e.call(this,a))}function e(a){this.focus(a),f.call(this,a)}function f(a){this.label(a,g),g++}var g=0;a&&(a=a.trim().toLowerCase()),"pre"===a||"preorder"===a?b.call(this,this.root()):"in"===a||"inorder"===a?c.call(this,this.root()):"post"===a||"postorder"===a?d.call(this,this.root()):c.call(this,this.root()),this.finish()});